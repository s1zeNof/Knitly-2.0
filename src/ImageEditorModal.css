.image-editor-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.image-editor-modal-content {
  background-color: #2c2f33; /* Dark theme background */
  color: #ffffff; /* Light text for dark theme */
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
  width: 90%;
  max-width: 800px; /* Increased max-width */
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow-y: auto; /* Allow scrolling for smaller screens */
}

.image-editor-modal-content h2 {
  margin-top: 0;
  margin-bottom: 20px;
  color: #ffffff; /* Header text color */
  text-align: center;
  font-size: 1.8em;
}

.editor-main-area {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
  flex-grow: 1;
  min-height: 0; /* Important for flex children to shrink properly */
}

.crop-container {
  flex: 2; /* Give more space to the cropper */
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #23272a; /* Slightly lighter dark background for contrast */
  border-radius: 8px;
  padding: 15px;
  overflow: hidden; /* Ensures the image doesn't overflow */
  min-height: 300px; /* Minimum height for the crop area */
}

.crop-container .ReactCrop {
  max-height: 60vh; /* Ensure the cropper itself doesn't get too tall */
}

.crop-container .ReactCrop__image {
  /* The image inside ReactCrop will be styled by its style prop in JS */
}

.filters-panel {
  flex: 1; /* Give less space to filters compared to cropper */
  display: flex;
  flex-direction: column;
  background-color: #23272a;
  padding: 15px;
  border-radius: 8px;
  overflow-y: auto; /* Allow scrolling if many filters */
  max-height: 60vh; /* Match cropper max height */
}

.filters-panel h3 {
  margin-top: 0;
  margin-bottom: 15px;
  color: #99aab5; /* Subdued text color for section title */
  font-size: 1.1em;
}

.filters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 10px;
}

.filter-preview {
  width: 100%;
  aspect-ratio: 1 / 1; /* Make them square */
  border: 2px solid transparent;
  border-radius: 6px;
  cursor: pointer;
  transition: border-color 0.2s ease, transform 0.2s ease;
  position: relative;
  overflow: hidden; /* Важливо, щоб img не виходив за межі */
  background-color: #333; /* Фон для випадків, коли img ще не завантажився або має прозорість */
}

.filter-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* Забезпечує заповнення без спотворення пропорцій */
  display: block; /* Забирає можливий нижній відступ */
  transition: transform 0.2s ease; /* Для ефекту при наведенні */
}


.filter-preview:hover img {
  transform: scale(1.05); /* Невелике збільшення зображення при наведенні */
}
.filter-preview:hover {
  border-color: #7289da; /* Accent color on hover */
}

.filter-preview.active {
  border-color: #5865f2; /* Stronger accent for active */
  box-shadow: 0 0 10px rgba(88, 101, 242, 0.7); /* Тінь для активного фільтра */
}
.filter-preview.active img {
    transform: scale(1.02); /* Невелике збільшення для активного, якщо потрібно */
}


.filter-preview span {
  position: absolute;
  bottom: 0px; /* Розміщення знизу */
  left: 0px;
  right: 0px;
  background-color: rgba(0, 0, 0, 0.7); /* Темніший фон для кращої читабельності */
  color: white;
  font-size: 0.75em; /* Трохи менший шрифт */
  padding: 4px 4px; /* Більше вертикального падінгу */
  /* border-radius: 3px; */
  border-bottom-left-radius: 4px; /* Закруглення тільки знизу, оскільки span на всю ширину */
  border-bottom-right-radius: 4px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  box-sizing: border-box; /* Щоб padding не впливав на ширину */
}


.quality-selector {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 20px;
  gap: 10px;
  font-size: 1em;
  color: #99aab5;
}

.quality-selector button {
  background-color: #40444b; /* Darker button background */
  color: #b9bbbe; /* Light gray text */
  border: none;
  padding: 8px 15px;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.quality-selector button:hover {
  background-color: #5c6067;
}

.quality-selector button.active {
  background-color: #7289da; /* Accent color for active */
  color: white;
  font-weight: bold;
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 15px;
  padding-top: 20px;
  border-top: 1px solid #40444b; /* Separator line */
}

.modal-actions button {
  padding: 10px 20px;
  border-radius: 5px;
  border: none;
  cursor: pointer;
  font-size: 1em;
  font-weight: 500;
  transition: background-color 0.2s ease, transform 0.1s ease;
}

.modal-actions button:active {
    transform: scale(0.98);
}

.cancel-button {
  background-color: #4f545c; /* Grayish button */
  color: #dcddde;
}

.cancel-button:hover {
  background-color: #5c6067;
}

.save-button {
  background-color: #5865f2; /* Primary action color (Discord purple) */
  color: white;
}

.save-button:hover {
  background-color: #4a55d2; /* Darker shade on hover */
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .image-editor-modal-content {
    width: 95%;
    padding: 20px;
  }
  .editor-main-area {
    flex-direction: column;
    max-height: 65vh; /* Adjust height for stacked layout - було 70vh */
  }
  .crop-container, .filters-panel {
    flex: none; /* Reset flex for column layout */
    width: 100%;
    max-height: 40vh; /* Give them appropriate height in stacked view - було 45vh */
  }
  .filters-panel {
     max-height: 20vh; /* Filters panel might need less height - було 25vh */
  }
  .filters-grid {
    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)); /* Smaller previews on mobile */
  }
  .modal-actions {
    padding-top: 15px;
  }
  .image-editor-modal-content h2 {
    font-size: 1.5em;
    margin-bottom: 15px;
  }
}

@media (max-width: 480px) {
  .image-editor-modal-content {
    padding: 10px; /* Було 15px */
  }
  .image-editor-modal-content h2 {
    font-size: 1.3em; /* Було 1.5em */
    margin-bottom: 10px; /* Було 15px */
  }
  .quality-selector {
    flex-direction: column;
    align-items: stretch;
  }
  .quality-selector button {
    width: 100%;
    margin-bottom: 5px;
  }
  .quality-selector button:last-child {
    margin-bottom: 0;
  }
  .modal-actions {
    flex-direction: column;
    gap: 8px; /* Було 10px */
  }
  .modal-actions button {
    width: 100%;
  }
}
