/* --- ЗАГАЛЬНА ОБГОРТКА --- */
.attachment-overlay {
    position: fixed;
    inset: 0;
    z-index: 2000;
    background-color: transparent; 
}
.attachment-menu-container {
    position: relative;
    width: 100%;
    height: 100%;
}

/* --- МЕНЮ ДЛЯ ДЕСКТОПУ --- */
.attachment-menu-desktop {
    display: none;
    position: absolute;
    bottom: 80px;
    left: 20px;
    background-color: var(--color-bg-light);
    border-radius: 0.75rem;
    padding: 0.5rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.25);
    border: 1px solid var(--color-border);
    animation: fadeInScale 0.2s ease-out forwards;
    transform-origin: bottom left;
}
@keyframes fadeInScale {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

.attachment-menu-desktop ul { list-style: none; margin: 0; padding: 0; }
.attachment-menu-desktop li {
    display: flex; align-items: center; gap: 1rem;
    /* padding: 0.75rem 1rem; Ensure label padding matches this if li has no padding */
    border-radius: 0.375rem; cursor: pointer;
    /* color: var(--color-text-primary); */ /* Колір тепер встановлюється на label або span всередині */
    transition: background-color 0.2s; width: 220px;
}
.attachment-menu-desktop li:hover:not(.disabled) { background-color: var(--color-border); }
.attachment-menu-desktop li.disabled { color: var(--color-disabled); cursor: not-allowed; }
.attachment-menu-desktop li.disabled:hover { background-color: transparent; }
.attachment-menu-desktop svg { width: 22px; height: 22px; }

/* Style for file input label inside li */
.attachment-menu-desktop li label.attachment-file-label {
    display: flex;
    align-items: center;
    gap: 1rem; /* Match li gap */
    padding: 0.75rem 1rem; /* Match li padding */
    width: 100%;
    height: 100%;
    cursor: pointer;
    border-radius: 0.375rem; /* Match li border-radius */
    color: var(--color-text-primary); /* Колір для тексту в label */
}
.attachment-menu-desktop li:hover label.attachment-file-label:not([disabled]) {
    /* background-color: var(--color-border); /* This is handled by li:hover */
}
.attachment-menu-desktop li label.attachment-file-label[disabled] {
    cursor: not-allowed;
    color: var(--color-disabled); /* Колір для тексту в disabled label */
}
.attachment-menu-desktop li span { /* Для елементів, які не є label */
    color: var(--color-text-primary);
}
.attachment-menu-desktop li.disabled span {
    color: var(--color-disabled);
}


/* --- НИЖНЯ ПАНЕЛЬ ДЛЯ МОБІЛЬНИХ --- */
.attachment-sheet-mobile {
    display: none;
    position: fixed; bottom: 0; left: 0; right: 0;
    background-color: var(--color-bg-medium);
    border-top-left-radius: 1rem; border-top-right-radius: 1rem;
    padding: 0.75rem; box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
    animation: slideUp 0.3s ease-out forwards;
}
@keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

.attachment-sheet-handle {
    width: 40px; height: 4px; background-color: var(--color-border);
    border-radius: 2px; margin: 0 auto 1rem auto;
}
.attachment-sheet-scroll {
    display: flex; gap: 1rem; overflow-x: auto;
    padding: 0.5rem 1rem 1rem 1rem;
}
.attachment-sheet-scroll::-webkit-scrollbar { display: none; }
.attachment-sheet-scroll { -ms-overflow-style: none; scrollbar-width: none; }
.mobile-item {
    display: flex; flex-direction: column; align-items: center;
    gap: 0.5rem; flex-shrink: 0; cursor: pointer;
    /* Make the div itself the clickable area if it doesn't contain a label */
}
.mobile-item label.attachment-file-label-mobile {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem; /* Match .mobile-item gap */
    cursor: pointer;
    text-decoration: none; /* Remove underline from label acting as link */
    color: inherit; /* Inherit text color */
    width: 100%; /* Ensure label takes full width of the item */
}

.mobile-item.disabled { cursor: not-allowed; filter: grayscale(80%); opacity: 0.6; }
.mobile-item.disabled label.attachment-file-label-mobile {
    cursor: not-allowed;
}

.mobile-item-icon {
    width: 60px; height: 60px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center; color: white;
}
.mobile-item-icon svg { width: 28px; height: 28px; }
.mobile-item-label { font-size: 0.8rem; color: var(--color-text-secondary); }

/* Кольори для іконок (залишаємо як є, якщо вони узгоджені або є акцентами) */
.mobile-item-icon.color-blue { background-color: #3897f0; }
.mobile-item-icon.color-cyan { background-color: #00bcd4; }
.mobile-item-icon.color-sky { background-color: #5ac8fa; }
.mobile-item-icon.color-green { background-color: #4cd964; }
.mobile-item-icon.color-yellow { background-color: #ffcc00; }
.mobile-item-icon.color-red { background-color: #ff3b30; }

/* --- АДАПТИВНІСТЬ --- */
@media (min-width: 769px) {
    .attachment-menu-desktop { display: block; }
}
@media (max-width: 768px) {
    .attachment-overlay { background-color: rgba(0,0,0,0.4); }
    .attachment-sheet-mobile { display: block; }
}